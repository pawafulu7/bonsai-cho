---
import AppLayout from "@/layouts/AppLayout.astro";
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { getAuthData } from "@/lib/auth/server";

// Get auth data to show appropriate CTA buttons
const { user } = await getAuthData(Astro);

// Button styles for Astro templates (avoid asChild issues with Radix Slot)
const buttonBaseStyles =
  "cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50";
const buttonPrimaryStyles = `${buttonBaseStyles} bg-primary text-primary-foreground shadow hover:bg-primary/90 h-12 px-8 text-base`;
const buttonOutlineStyles = `${buttonBaseStyles} border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-12 px-8 text-base`;
---

<AppLayout
  title="盆栽帳 - Bonsai-Cho"
  description="盆栽コレクションを記録し、愛好家と共有しましょう。成長を記録し、仲間とつながり、盆栽の芸術を楽しめます。"
>
  <!-- Hero Section -->
  <section class="relative overflow-hidden py-20 md:py-32">
    <div class="container-app">
      <div class="mx-auto max-w-3xl text-center">
        <h1 class="font-serif text-4xl font-bold tracking-tight text-foreground sm:text-5xl md:text-6xl">
          あなたの
          <span class="text-primary">盆栽</span>
          を記録しよう
        </h1>
        <p class="mt-6 text-lg leading-8 text-muted-foreground md:text-xl">
          盆栽の成長を記録し、写真を共有し、盆栽を愛する仲間とつながりましょう。
        </p>
        <div class="mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row">
          {user ? (
            <a href="/bonsai/quick-add" class={buttonPrimaryStyles}>
              盆栽を登録する
            </a>
          ) : (
            <a href="/login?returnTo=/bonsai/quick-add" class={buttonPrimaryStyles}>
              今すぐ始める
            </a>
          )}
          <a href="/bonsai" class={buttonOutlineStyles}>
            盆栽を見る
          </a>
        </div>
      </div>
    </div>

    <!-- Decorative background -->
    <div class="absolute inset-0 -z-10 overflow-hidden" aria-hidden="true">
      <div class="absolute left-1/2 top-0 h-[600px] w-[600px] -translate-x-1/2 -translate-y-1/2 rounded-full bg-primary/5 blur-3xl"></div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="border-t border-border bg-muted/20 py-20">
    <div class="container-app">
      <div class="mx-auto max-w-2xl text-center">
        <h2 class="font-serif text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
          盆栽管理に必要なすべてを
        </h2>
        <p class="mt-4 text-lg text-muted-foreground">
          記録・共有・成長。盆栽管理プラットフォームで、あなたの盆栽ライフをサポートします。
        </p>
      </div>

      <div class="mt-16 grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Feature 1 -->
        <Card className="border-border bg-card shadow-card">
          <CardHeader>
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6" aria-hidden="true">
                <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                <circle cx="12" cy="13" r="3"/>
              </svg>
            </div>
            <CardTitle className="font-serif">フォトギャラリー</CardTitle>
            <CardDescription>
              盆栽コレクションの写真をアップロード・整理。時間の経過とともに変化を追跡できます。
            </CardDescription>
          </CardHeader>
        </Card>

        <!-- Feature 2 -->
        <Card className="border-border bg-card shadow-card">
          <CardHeader>
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6" aria-hidden="true">
                <path d="M12 20h9"/>
                <path d="M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"/>
              </svg>
            </div>
            <CardTitle className="font-serif">お手入れ記録</CardTitle>
            <CardDescription>
              水やり、剪定、植え替えなどのお手入れ記録を詳細に残せます。
            </CardDescription>
          </CardHeader>
        </Card>

        <!-- Feature 3 -->
        <Card className="border-border bg-card shadow-card">
          <CardHeader>
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6" aria-hidden="true">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <CardTitle className="font-serif">コミュニティ</CardTitle>
            <CardDescription>
              世界中の盆栽愛好家とつながりましょう。ヒントを共有し、フィードバックをもらい、一緒に学べます。
            </CardDescription>
          </CardHeader>
        </Card>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-20">
    <div class="container-app">
      <div class="mx-auto max-w-2xl text-center">
        <h2 class="font-serif text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
          今日から盆栽の記録を始めよう
        </h2>
        <p class="mt-4 text-lg text-muted-foreground">
          盆栽愛好家のコミュニティに参加して、あなたのコレクションを記録しましょう。
        </p>
        <div class="mt-8">
          {user ? (
            <a href="/bonsai/quick-add" class={buttonPrimaryStyles}>
              新しい盆栽を追加
            </a>
          ) : (
            <a href="/login?returnTo=/bonsai/quick-add" class={buttonPrimaryStyles}>
              無料で始める
            </a>
          )}
        </div>
      </div>
    </div>
  </section>
</AppLayout>
